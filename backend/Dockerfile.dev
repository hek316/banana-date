# Development Dockerfile with Hot-Reloading Support
FROM gradle:8.10-jdk21

WORKDIR /app

# Gradle wrapper 및 설정 파일 복사
COPY gradlew ./
COPY gradle ./gradle
COPY build.gradle settings.gradle ./

# 의존성 다운로드
RUN gradle dependencies --no-daemon || true

# 소스 코드는 볼륨 마운트로 제공됨
# docker-compose에서 volume으로 연결

EXPOSE 8080

# Spring Boot DevTools를 활용한 핫 리로딩
# bootRun은 자동으로 클래스 변경을 감지하고 재시작
CMD ["gradle", "bootRun", "--no-daemon", "--args='--spring.profiles.active=local'"]
